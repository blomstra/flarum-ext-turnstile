(()=>{var t={n:e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return t.d(n,{a:n}),n},d:(e,n)=>{for(var r in n)t.o(n,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};(()=>{"use strict";t.r(e);const n=flarum.core.compat["forum/app"];var r=t.n(n);const o=flarum.core.compat["common/extend"],i=flarum.core.compat["forum/components/SignUpModal"];var l=t.n(i);function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function s(t,e){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},s(t,e)}const u=flarum.core.compat["common/Component"];var c=function(t){var e,n;function o(){for(var e,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))||this).widgetId=void 0,e.turnstileLoaded=void 0,e}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,s(e,n);var i,l,u=o.prototype;return u.oninit=function(e){t.prototype.oninit.call(this,e),this.turnstileLoaded=!!window.turnstile},u.onTurnstileComplete=function(t){var e,n;null==(e=(n=this.attrs).onTurnstileStateChange)||e.call(n,t)},u.onTurnstileExpire=function(){var t,e;this.widgetId&&window.turnstile.reset(this.widgetId),null==(t=(e=this.attrs).onTurnstileStateChange)||t.call(e,null)},u.onTurnstileError=function(){var t,e;null==(t=(e=this.attrs).onTurnstileStateChange)||t.call(e,null)},u.createTurnstile=function(){this.turnstileLoaded&&window.turnstile.render(this.element,this.config)},u.removeTurnstile=function(){this.turnstileLoaded&&this.widgetId&&window.turnstile.remove(this.widgetId)},u.oncreate=function(e){t.prototype.oncreate.call(this,e),this.createTurnstile()},u.onbeforeremove=function(e){t.prototype.onbeforeremove.call(this,e),this.removeTurnstile()},u.view=function(t){return this.turnstileLoaded?m("div",{class:"Blomstra-Turnstile"}):m("p",{class:"BlomstraTurnstile-notLoaded"},r().translator.trans("blomstra-turnstile.forum.not_loaded_error"))},i=o,(l=[{key:"config",get:function(){return{action:this.attrs.action,sitekey:r().forum.attribute("blomstra-turnstile.site_key"),callback:this.onTurnstileComplete.bind(this),"expired-callback":this.onTurnstileExpire.bind(this),"error-callback":this.onTurnstileError.bind(this)}}}])&&a(i.prototype,l),Object.defineProperty(i,"prototype",{writable:!1}),o}(t.n(u)());r().initializers.add("blomstra/turnstile",(function(){(0,o.extend)(l().prototype,"submitData",(function(t){t.turnstileToken=this.__turnstileToken})),(0,o.extend)(l().prototype,"fields",(function(t){var e=this;t.add("turnstile",m(c,{action:"sign_up",onTurnstileStateChange:function(t){e.__turnstileToken=t}}),-5)}))}))})(),module.exports=e})();
//# sourceMappingURL=forum.js.map